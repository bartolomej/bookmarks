<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="../../assets/images/landing.png">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Collection of cool links and learning resources.">
    <meta name="author" content="Bartolomej Kozorog">

    <!-- OG Meta Tags to improve the way the post looks when you share the page on LinkedIn, Facebook, Google+ -->
    <meta property="og:site_name" content="" /> <!-- website name -->
    <meta property="og:site" content="" /> <!-- website link -->
    <meta property="og:title" content=""/> <!-- title shown in the actual shared post -->
    <meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
    <meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
    <meta property="og:url" content="" /> <!-- where do you want your post to link to -->
    <meta property="og:type" content="article" />

    <title>Cool links</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>
<body>


<div id="content" class="article">

</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>

  async function fetchMarkdownArticle() {
    let readme = await fetch('README.md').then(res => res.text());
    let meta = await fetch('meta.json').then(res => res.json());

    document.getElementById('content').innerHTML = marked(readme);
    document.getElementsByTagName('p')[0].style.textAlign = 'center';
    [... document.getElementsByTagName('li')].forEach(li => {
        let url = li.children[0].href;
        let props = meta[url];
        if (props === undefined) return;
        li.innerHTML = `
            <a href="${url}">
                <img src="${props.image || props.icon}"/>
                <h3>${props.title}</h3>
                <p>${props.description}</p>
            </a>
        `;
    });
  }

  /**
   * TODO: add search functionality
   * TODO: remove card style from contents
   * TODO: save image to /assets for optimization
   */

  fetchMarkdownArticle();
</script>
</body>
</html>